CREATE TABLE CATEGORIES (
	CATEGORY_ID NUMBER PRIMARY KEY,
	CATEGORY_NAME VARCHAR2(100) UNIQUE 
);

COMMENT ON COLUMN CATEGORIES.CATEGORY_ID IS '카테고리 ID';
COMMENT ON COLUMN CATEGORIES.CATEGORY_NAME IS '카테고리 이름';


CREATE TABLE PRODUCTS (
	PRODUCT_ID NUMBER PRIMARY KEY,
	PRODUCT_NAME VARCHAR2(100) NOT NULL,
	CATEGORY NUMBER REFERENCES CATEGORIES,
	PRICE NUMBER DEFAULT 0,
	STOCK_QUANTITY NUMBER DEFAULT 0
);

COMMENT ON COLUMN PRODUCTS.PRODUCT_ID IS '상품 코드';
COMMENT ON COLUMN PRODUCTS.PRODUCT_NAME IS '상품 이름';
COMMENT ON COLUMN PRODUCTS.CATEGORY IS '카테고리';
COMMENT ON COLUMN PRODUCTS.PRICE IS '가격';
COMMENT ON COLUMN PRODUCTS.STOCK_QUANTITY IS '재고량';

CREATE TABLE CUSTOMERS (
	CUSTOMER_ID NUMBER PRIMARY KEY,
	NAME VARCHAR2(20) NOT NULL,
	GENDER CHAR(3) CHECK(GENDER IN('남','여')),
	ADDRESS VARCHAR2(100),
	PHONE VARCHAR2(30)
);

COMMENT ON COLUMN CUSTOMERS.CUSTOMER_ID IS '고객 ID';
COMMENT ON COLUMN CUSTOMERS.NAME IS '이름';
COMMENT ON COLUMN CUSTOMERS.GENDER IS '성별';
COMMENT ON COLUMN CUSTOMERS.ADDRESS IS '주소';
COMMENT ON COLUMN CUSTOMERS.PHONE IS '전화번호';

CREATE TABLE ORDERS (
	ORDER_ID NUMBER PRIMARY KEY,
	ORDER_DATE DATE DEFAULT SYSDATE,
	STATUS CHAR(1) DEFAULT 'N' CHECK(STATUS IN('Y','N')),
	CUSTOMER_ID NUMBER REFERENCES CUSTOMERS ON DELETE CASCADE
);

COMMENT ON COLUMN ORDERS.ORDER_ID IS '주문 번호';
COMMENT ON COLUMN ORDERS.ORDER_DATE IS '주문일';
COMMENT ON COLUMN ORDERS.STATUS IS '처리상태';
COMMENT ON COLUMN ORDERS.CUSTOMER_ID IS '고객 ID';

CREATE TABLE ORDER_DETAILS (
	ORDER_DETAIL_ID NUMBER PRIMARY KEY,
	ORDER_ID NUMBER REFERENCES ORDERS ON DELETE CASCADE,
	PRODUCT_ID NUMBER REFERENCES PRODUCTS ON DELETE SET NULL,
	QUANTITY NUMBER,
	PRICE_PER_UNIT NUMBER
);

COMMENT ON COLUMN ORDER_DETAILS.ORDER_DETAIL_ID IS '주문 상세 ID';
COMMENT ON COLUMN ORDER_DETAILS.ORDER_ID IS '주문 번호';
COMMENT ON COLUMN ORDER_DETAILS.PRODUCT_ID IS '상품 코드';
COMMENT ON COLUMN ORDER_DETAILS.QUANTITY IS '수량';
COMMENT ON COLUMN ORDER_DETAILS.PRICE_PER_UNIT IS '가격';

INSERT INTO CATEGORIES 
VALUES(1,'스마트폰');
INSERT INTO CATEGORIES 
VALUES(2,'TV');
INSERT INTO CATEGORIES 
VALUES(3,'Gaming');

COMMIT;

INSERT INTO PRODUCTS 
VALUES(101,'Apple iPhone 12', 1, 1500000, 30);
INSERT INTO PRODUCTS 
VALUES(102,'Samsung Galaxy S24', 1, 1800000, 50);
INSERT INTO PRODUCTS 
VALUES(201,'LG OLED TV', 2, 3600000, 10);
INSERT INTO PRODUCTS 
VALUES(301,'Sony PlayStation 5', 3, 700000, 15);

INSERT INTO CUSTOMERS 
VALUES(1, '홍길동','남','서울시 성동구 왕십리','010-1111-2222');
INSERT INTO CUSTOMERS 
VALUES(2, '유관순','여','서울시 종로구 안국동','010-3333-1111');

INSERT INTO ORDERS 
VALUES(576,'2024-02-29','N',1);
INSERT INTO ORDERS 
VALUES(978,'2024-03-11','Y',2);
INSERT INTO ORDERS 
VALUES(777,'2024-03-11','N',2);
INSERT INTO ORDERS 
VALUES(134,'2022-12-25','Y',1);
INSERT INTO ORDERS 
VALUES(499,'2020-01-03','Y',1);

INSERT INTO ORDER_DETAILS 
VALUES(111, 576, 101, 1, 1500000);
INSERT INTO ORDER_DETAILS 
VALUES(222, 978, 201, 2, 3600000);
INSERT INTO ORDER_DETAILS 
VALUES(333, 978, 102, 1, 1800000);
INSERT INTO ORDER_DETAILS 
VALUES(444, 777, 301, 5, 700000);
INSERT INTO ORDER_DETAILS 
VALUES(555, 134, 102, 1, 1800000);
INSERT INTO ORDER_DETAILS 
VALUES(666, 499, 201, 3, 3600000);